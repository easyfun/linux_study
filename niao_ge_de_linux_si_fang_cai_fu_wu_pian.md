###鸟哥的Linux私房菜服务篇

###第1章 架站之前所需的技能分析
1.1 架设一台完美服务器的基本功课<br/>
熟练操作操作系统，登录分析，账号管理，文件系统管理<br/>
网络知识<br/>
防火墙知识<br/>

1.2 架站的基本流程<br/>
了解网络基础<br/>
了解架站的目的<br/>
Linux硬盘规划<br/>
了解想要架站的服务原理<br/>
服务软件的安装、漏洞补修、包升级<br/>
主机设置、启动、观察与调试<br/>
客户端设置、观察与调试<br/>
安全性设置<br/>
服务日志、日志文件与备份管理<br/>

###第2章 网络基本概念
2.1 网络<br/>
2.1.2 以太网<br/>
网络硬件：光纤网络，以太网，wifi，蓝牙，ATM<br/>
各种网络硬件适用于不同的场景<br/>

1.以太网速度：
第一代 10Mbps 同轴电缆线 后来用双绞线<br/>
第二代 100Mbps 双绞线<br/>
第三代 1000Mbps 更好的双绞线<br/>

同轴电缆线    总线（bus）连接<br/>
双绞线        星形连接（集线器，交换机，路由器）<br/>

2.以太网的接头：RJ-45接头（568A，568B）<br/>

网线种类：
并行线  两个568A接头的网线，连接主机网卡和集线器<br/>
跳线    一个568A，一个568B接头的网下，直接连接两个主机网卡<br/>

3.数据在以太网间的传送（MAC)<br/>
_网络共享介质_在单一时间点内，仅能被一台主机使用<br/>
以太网采用CSMA/CD技术，载波监听多路访问/冲突检测技术，工作在网络共享介质上<br/>
以太网数据传输使用广播方式，在同一个子网内部<br/>
通信方式：点对点，广播（组播）<br/>

MAC帧是网络硬件上数据传送的最小单位<br/>

以太网MAC帧的结构<br/>
链路层--           目的地址6B 源地址6B 数据域位通信2B 数据46~1500B 校验码4B<br/>
物理层--  前导码8B 以太网MAC帧
[!mac_image](./images/yi_tai_wang_mac_format.png)

数据部分长度有扩展<br/>
不同的网络介质，MAC帧格式不一样<br/>

MAC地址  6个字节<br/>
前3个字节厂商编码<br/>

4.共不共享很重要，集线器还是交换机<br/>
集线器（Hub）是共享媒介<br/>
交换机（Switch）不是共享媒介<br/>

2.1.3 OSI七层协议<br/>
开放式系统互联参考模型<br/>
从下到上：物理层，链路层，网络层，传输层，会话层，表示层，应用层<br/>
下层为上层服务<br/>

五层参考模型<br/>
从下到上：物理层，链路层，网络层，传输层，应用层<br/>

各层的作用<br/>
物理层 定义硬件的电器特性（0，1信号的电压等等），传输0，1信号<br/>
       集线器工作在这层<br/>

链路层 定义网络上传输数据的最小单位（帧格式），错误检查，流量检查<br/>
       单独的0，1信号是没有意义的；帧是0，1信号的组合，有意义<br/>
       以太网工作在物理层，链路层<br/>

网络层 定义IP地址，划分子网，确定路由<br/>
       交换机，路由器工作在这层<br/>

传输层 <br/>

应用层 <br/>

Tcp/IP协议结构<br/>
[!tcp_ip_protocol_1](tcp_ip_protocol_1.png)
[!tcp_ip_protocol_2](tcp_ip_protocol_2.png)


2.2 IP与MAC<br/>

2.2.1 传输单位与MAC<br/>
MAC（媒体访问控制），MAC帧在同一个IP网段上广播，不能跨IP网段。<br/>
MAC帧中 源MAC地址，目标MAC地址<br/>

ipconfig 查看IP和MAC地址。<br/>

ARP 地址解析协议，获取同个IP网段内的指定IP主机的网卡的MAC地址。<br/>
    arp table 同个IP网段的IP-MAC地址表，动态更新，可以添加静态记录<br/>
RARP 逆地址解析协议。<br/>

2.2.2 IP的组成<br/>
IP地址 32bit，通常使用点分十进制格式<br/>
       IP地址分成两个部分，Net_ID+Host_ID<br/>
       Net_ID，子网掩码用来划分子网<br/>

IP协议 IPv4，IPv6<br/>

2.2.3 网段的概念与IP的分级<br/>
1. 网段的概念<br/>
MAC地址不能分子网，以太网采用广播通信，同一个网络的主机数目不能太大，所以采用IP地址。<br/>
IP地址分成两个部分，Net_ID+Host_ID<br/>
Net_ID，子网掩码用来划分子网<br/>

物理网段 同一个物理网段可以化成多个IP网段<br/>
IP（网络）网段<br/>

2. IP的分级<br/>
A，B，C三类地址<br/>

A类 前8位 以0开头<br/>
B类 前16位 以10开头<br/>
C类 前24位 以110开头<br/>

127.xxx.xxx.xxx是一个C类地址，不供Internet使用，给了操作系统，作为内部循环网络<br/>

2.2.4 Netmask的用途与子网的划分<br/>
A，B，C类地址使用率太低，使用Netmask再次划分网络，计算IP网段<br/>

两种记法<br/>
IP/位数 192.168.0.52/24<br/>
IP/点分十进制 192.168.0.52/255.255.255.0<br/>

IP按位与Netmask==Net_ID<br/>

2.2.5 IP的种类与取得方式<br/>
1.IP的种类<br/>
公有IP 在Internet上使用<br/>
私有IP 在局域网使用<br/>
       解决IPv4的IP数不足<br/>

私有IP保留了A，B，C3类IP地址段<br/>
A类 10.0.0.0~10.255.255.255<br/>
B类 172.16.0.0~172.31.255.255<br/>
C类 192.168.0.0~192.168.255.255<br/>

私有IP的限制<br/>
私有地址的路由信息不能对外广播<br/>
使用私有地址作为源或目的地址的数据包，不能在Internet上传送<br/>
关于私有地址的参考记录（如DNS），只能在内部网络使用<br/>

局域网（内网）内的主机要访问Internet，通过启动防火墙和NAT服务的主机，做了IP伪装后访问Internet<br/>

2.特殊的loopback IP网段<br/>
主机没有联网，通过内部循环网络（内部回环网络），做网络服务测试<br/>

3.IP的取得方式<br/>

2.2.6 IP数据包的表头<br/>
IP包头+IP包体<br/>

IP包头的长度是32bits的整数倍<br/>
IP数据包的最大长度65535B，包括包头长度和包体长度<br/>

IP包头的关键字段<br/>
TTL Time to life，存活时间，能通过的路由器的最大数目<br/>
Protocol<br/>
来源IP<br/>
目标IP<br/>










